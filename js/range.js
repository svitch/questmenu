window.Modernizr=function(t,e,n){function r(t){g.cssText=t}function a(t,e){return typeof t===e}function i(t,e){return!!~(""+t).indexOf(e)}function o(t,e){for(var r in t){var a=t[r];if(!i(a,"-")&&g[a]!==n)return"pfx"==e?a:!0}return!1}function s(t,e,r){for(var i in t){var o=e[t[i]];if(o!==n)return r===!1?t[i]:a(o,"function")?o.bind(r||e):o}return!1}function l(t,e,n){var r=t.charAt(0).toUpperCase()+t.slice(1),i=(t+" "+T.join(r+" ")+r).split(" ");return a(e,"string")||a(e,"undefined")?o(i,e):(i=(t+" "+A.join(r+" ")+r).split(" "),s(i,e,n))}var c,u,f,p="2.8.3",d={},h=!0,m=e.documentElement,y="modernizr",v=e.createElement(y),g=v.style,b=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),E="Webkit Moz O ms",T=E.split(" "),A=E.toLowerCase().split(" "),w={},x=[],_=x.slice,j=function(t,n,r,a){var i,o,s,l,c=e.createElement("div"),u=e.body,f=u||e.createElement("body");if(parseInt(r,10))for(;r--;)s=e.createElement("div"),s.id=a?a[r]:y+(r+1),c.appendChild(s);return i=["&#173;",'<style id="s',y,'">',t,"</style>"].join(""),c.id=y,(u?c:f).innerHTML+=i,f.appendChild(c),u||(f.style.background="",f.style.overflow="hidden",l=m.style.overflow,m.style.overflow="hidden",m.appendChild(f)),o=n(c,t),u?c.parentNode.removeChild(c):(f.parentNode.removeChild(f),m.style.overflow=l),!!o},C=function(e){var n=t.matchMedia||t.msMatchMedia;if(n)return n(e)&&n(e).matches||!1;var r;return j("@media "+e+" { #"+y+" { position: absolute; } }",function(e){r="absolute"==(t.getComputedStyle?getComputedStyle(e,null):e.currentStyle).position}),r},O={}.hasOwnProperty;f=a(O,"undefined")||a(O.call,"undefined")?function(t,e){return e in t&&a(t.constructor.prototype[e],"undefined")}:function(t,e){return O.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError;var n=_.call(arguments,1),r=function(){if(this instanceof r){var a=function(){};a.prototype=e.prototype;var i=new a,o=e.apply(i,n.concat(_.call(arguments)));return Object(o)===o?o:i}return e.apply(t,n.concat(_.call(arguments)))};return r}),w.touch=function(){var n;return"ontouchstart"in t||t.DocumentTouch&&e instanceof DocumentTouch?n=!0:j(["@media (",b.join("touch-enabled),("),y,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(t){n=9===t.offsetTop}),n},w.history=function(){return!!t.history&&!!history.pushState},w.csstransforms=function(){return!!l("transform")},w.csstransforms3d=function(){var t=!!l("perspective");return t&&"webkitPerspective"in m.style&&j("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(e,n){t=9===e.offsetLeft&&3===e.offsetHeight}),t},w.csstransitions=function(){return l("transition")},w.localstorage=function(){try{return localStorage.setItem(y,y),localStorage.removeItem(y),!0}catch(t){return!1}};for(var S in w)f(w,S)&&(u=S.toLowerCase(),d[u]=w[S](),x.push((d[u]?"":"no-")+u));return d.addTest=function(t,e){if("object"==typeof t)for(var r in t)f(t,r)&&d.addTest(r,t[r]);else{if(t=t.toLowerCase(),d[t]!==n)return d;e="function"==typeof e?e():e,"undefined"!=typeof h&&h&&(m.className+=" cpf-"+(e?"":"no-")+t),d[t]=e}return d},r(""),v=c=null,function(t,e){function n(t,e){var n=t.createElement("p"),r=t.getElementsByTagName("head")[0]||t.documentElement;return n.innerHTML="x<style>"+e+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var t=g.elements;return"string"==typeof t?t.split(" "):t}function a(t){var e=v[t[m]];return e||(e={},y++,t[m]=y,v[y]=e),e}function i(t,n,r){if(n||(n=e),u)return n.createElement(t);r||(r=a(n));var i;return i=r.cache[t]?r.cache[t].cloneNode():h.test(t)?(r.cache[t]=r.createElem(t)).cloneNode():r.createElem(t),!i.canHaveChildren||d.test(t)||i.tagUrn?i:r.frag.appendChild(i)}function o(t,n){if(t||(t=e),u)return t.createDocumentFragment();n=n||a(t);for(var i=n.frag.cloneNode(),o=0,s=r(),l=s.length;l>o;o++)i.createElement(s[o]);return i}function s(t,e){e.cache||(e.cache={},e.createElem=t.createElement,e.createFrag=t.createDocumentFragment,e.frag=e.createFrag()),t.createElement=function(n){return g.shivMethods?i(n,t,e):e.createElem(n)},t.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/[\w\-]+/g,function(t){return e.createElem(t),e.frag.createElement(t),'c("'+t+'")'})+");return n}")(g,e.frag)}function l(t){t||(t=e);var r=a(t);return g.shivCSS&&!c&&!r.hasCSS&&(r.hasCSS=!!n(t,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),u||s(t,r),t}var c,u,f="3.7.0",p=t.html5||{},d=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,h=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,m="_html5shiv",y=0,v={};!function(){try{var t=e.createElement("a");t.innerHTML="<xyz></xyz>",c="hidden"in t,u=1==t.childNodes.length||function(){e.createElement("a");var t=e.createDocumentFragment();return"undefined"==typeof t.cloneNode||"undefined"==typeof t.createDocumentFragment||"undefined"==typeof t.createElement}()}catch(n){c=!0,u=!0}}();var g={elements:p.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:f,shivCSS:p.shivCSS!==!1,supportsUnknownElements:u,shivMethods:p.shivMethods!==!1,type:"default",shivDocument:l,createElement:i,createDocumentFragment:o};t.html5=g,l(e)}(this,e),d._version=p,d._prefixes=b,d._domPrefixes=A,d._cssomPrefixes=T,d.mq=C,d.testProp=function(t){return o([t])},d.testAllProps=l,d.testStyles=j,d.prefixed=function(t,e,n){return e?l(t,e,n):l(t,"pfx")},m.className=m.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(h?" cpf-js cpf-"+x.join(" cpf-"):""),d}(this,this.document),function(t){"use strict";function e(e,n,r){var a,i,o=Array.isArray(e)?e:e.split("."),s=n||t;r=r!==!1;for(var l=0;l<o.length&&(a=o[l],i=s[a],p(i,"object")||r&&(s[a]=i={}),s=i,null!==s&&!p(s,"undefined"));l+=1);return s}function n(t,n){var r,a=Array.isArray(t)?t:t.split("."),i=e(a.slice(0,a.length-1),n,!1);return null===i||p(i,"undefined")||(r=i[a.pop()]),r}function r(t){var e,n=t&&p(t,"object")&&!(t.nodeType||t===t.window);try{n=n&&!(t.constructor&&!u.call(t,"constructor")&&!u.call(t.constructor.prototype,"isPrototypeOf"))}catch(r){n=!1}if(n){for(e in t);n=p(e,"undefined")||u.call(t,e)}return n}function a(){var t,e,n,i,o,s,l,c,d;if(p(arguments[0],"boolean")&&(n=f.shift.apply(arguments)),arguments.length<2)return arguments[0];t=f.shift.apply(arguments),d=p(t),"object"!=d&&"function"!=d&&"array"!=d&&(t={}),e=arguments;for(var h=0;h<e.length;h+=1)if(i=e[h],null!=i)for(var m in i)u.call(i,m)&&i[m]!==t&&(o=t[m],s=i[m],((c=Array.isArray(s))||r(s))&&n?(l=c?Array.isArray(o)?o:[]:p(o,"object")?o:{},t[m]=a(!0,l,s)):p(s,"undefined")||(t[m]=s));return t}function i(){var t,e,n,r,a,o,s,l,c=[],d=!1;if(p(arguments[0],"boolean")&&(d=f.shift.call(arguments)),c=f.reduce.call(arguments,function(t,e){var n=p(e),r=t.length>0&&p(t[0]);return(r?n===r:"array"===n||"object"===n)&&t.push(e),t},c),r=c.shift(),s=Array.isArray(r),c.length)for(var h=0;h<c.length;h++){n=c[h];for(var m in n)u.call(n,m)&&(a=p(t=n[m]),o=p(e=r[m]),a===o&&("object"===a||(l="array"===a))&&t!==e&&d?r[m]=i(!0,l?[]:{},e,t):"undefined"!=o?s?r.push(t):r[m]=[].concat(e,t):r[m]=t)}return r}function o(t,e,n){var r=null;return e=e||100,function(){function a(){n||t.apply(i,o),r=null}var i=this,o=arguments;null!==r?clearTimeout(r):n&&t.apply(i,o),r=setTimeout(a,e)}}function s(t,e,n){e=e||100;var r,a=null;return function(){var i=n||this,o=+new Date;r&&r+e>o?(clearTimeout(a),a=setTimeout(function(){r=o,t.apply(i,arguments)},e)):(clearTimeout(a),r=o,t.apply(i,arguments))}}function l(t){var e=function(){var t,n=this;return n instanceof e||(n=new e(e)),(arguments[0]!==e||1!==arguments.length)&&(t=n._Init.apply(n,arguments),p(t,"object")?n=t:n._Init=null),n};return null===t||p(t,"undefined")||(e.prototype=t,e.prototype.constructor=e),e}"DEBUG"in t||(t.DEBUG=!1);var c=Object.prototype,u=c.hasOwnProperty,f=Array.prototype,p=function(){for(var t,e=["Object","Array","Boolean","Date","Function","Number","Null","RegExp","String","Undefined","Arguments","Error","Math","JSON"],n=c.toString,r={},a=e[0].toLowerCase(),i=e.length;i--;)t=e[i],r["["+a+" "+t+"]"]=t.toLowerCase();return function(t,e){var i=typeof t;return(i===a||"function"===i)&&(i=null===t?"null":r[n.call(t)]||a),e?e===i:i}}(),d=function(){var t=Array.isArray;return p(t,"function")||(t=Array.isArray=function(t){return p(t,"array")}),function(e){return t(e)}}(),h=function(){var e=function(e,r){var a=n(["fest"].concat(e),t);if(p(a,"function"))return a(r);if(t.DEBUG)throw new Error("Шаблон "+e+" отсутствует.")};return function(n){if(n)return e.bind(null,n);if(t.DEBUG)throw new Error("Не указано имя шаблона")}}(),m=function(){var t="onclick",e="_options";return function(n){var r,a=n[t],i=n[e];if(null!=a){try{r=a()}catch(o){}n.removeAttribute(t),n[t]=null,n[e]=r}else null!=i&&(r=i);return r}}(),y=function(){function n(n){return n||(n="location"in t&&t.location.hostname.split(".").slice(0,-2).join(".")||""),o=o||{},e(n,o)}function r(t,e,r,i){var o=n(i),s=o[t];return!s||r?s=o[t]=a(!0,{},e):a(!0,s,e),s}function i(t,e){return n(e)[t]}var o;return{get:function(t,e){var n=i(t,e);return n&&n.options},set:function(t,e,n){var a=null;(p(arguments[1],"string")||p(arguments[2],"object")||4===arguments.length)&&(a=arguments[1],e=arguments[2],n=arguments[3]);var i={options:e};return r(t,i,n,a).options},setParams:function(){return r.apply(null,f.slice.call(arguments,0,3))},getParams:function(){return i.apply(null,f.slice.call(arguments,0,1))},registerModule:function(t,e){r(t,{initializer:e})}}}(),v=e("ru.mail.cpf");a(v,{Basic:{Extend:a,Merge:i,getOptions:m,moduleOpts:y,typeOf:p,getConstructor:l,getByPath:n,debounce:o,throttle:s},Tools:{getTemplate:h}}),a(v,{Types:{Array:{isArray:d}}}),t.getNameSpace=e}(new Function("return this")()),function(t,e){function n(t){var e=l(t),n={bind:function(){e.add.apply(e,arguments)},once:function(){e.once.apply(e,arguments)},_fire:function(){var t=s.slice.call(arguments);o(t[2],"undefined")&&(t[2]=this),e.fire.apply(e,t)}};t.Expandable===!0&&(n._addCbkTypes=function(){e._addTypes.apply(e,arguments)}),i(this,n)}function r(e){var n,r;if(o(this,"object")&&this!==t){if(o(this._addEventTypes,"function"))return void this._addEventTypes(e.Types);r=e.Expandable=e.Expandable!==!1,n=l(e),i(this,{_trigger:function(){var t=s.slice.call(arguments);t[1]=t.splice(1,t.length),t[2]=this,n.fire.apply(n,t)},on:n.add.bind(n),once:n.once.bind(n),off:n.remove.bind(n)}),r&&(this._addEventTypes=n._addTypes.bind(n))}}var a=e.Basic,i=a.Extend,o=a.typeOf,s=Array.prototype,l=a.getConstructor(function(){function t(t,e,n){for(var r=e.split(" "),a=r.length;a--;)u.call(this,t,r[a],n)}var e={Types:null,Expandable:!1,Memory:!1,Once:!1},n=function(t,e){var n,r,a=this._Types,i=this._Opts;!o(t,"string")||t in a||(a[t]=n={Handlers:null,handlerParams:null,Once:e&&e.once===!0},r=e&&e.memory||i.Memory,r&&(n.History=[],o(r,"number")&&(n.History.maxLength=r)))},r=function(t,e,n){var r=t.Handlers,a=t.handlerParams;r.indexOf(e)>-1||(r.push(e),a.push({once:n===!0}))},a=function(t,e){var n=t.Handlers,r=t.handlerParams,a=o(e,"function")?n.indexOf(e):o(e,"number")?e:-1;a>-1&&(n.splice(a,1),r.splice(a,1))},l=function(t,e){for(var n,r,a,i=t.History,o=0;o<i.length;o++)n=i[o],r=n.context,a=n.args,e.apply(r,a)},c=function(t,e,n,i){var s,c,u=this._Opts,f=(u.Once||n.once)===!0,p=n.fired;o(e,"function")?s=e:o(e,"object")&&(o(s=e.handler)||(s=null),c=e.once===!0),s&&(t?(i&&l.call(this,n,s),p&&(f||c&&i)||r.call(this,n,s,c)):a.call(this,n,s))},u=function(t,e,n){var r,a,i=this._Types;if(i&&e&&o(r=i[e],"object")){if(!Array.isArray(r.Handlers)){if(!t)return;r.Handlers=[],r.handlerParams=[]}if(a=Array.isArray(r.History)&&r.History.length>0,Array.isArray(n))for(var s=0;s<n.length;s++)c.call(this,t,n[s],r,a);else n?c.call(this,t,n,r,a):t||delete i[e]}},f=function(){var e,n=arguments,r=s.shift.apply(n),a=n[0],i=o(a);if("string"==i)t.call(this,r,a,n[1]);else if("object"==i){e=a;for(var l in e)e.hasOwnProperty(l)&&t.call(this,r,l,e[l])}},p=function(t){var e,r,a,i;if(Array.isArray(t))for(var s=0;s<t.length;s++)o(e=t[s],"string")&&n.call(this,e);else if(o(t,"object"))for(var l in t)t.hasOwnProperty(l)&&(r=t[l],o(r,"object")?(a=r.handlers,i=r.opts):a=r,n.call(this,l,i),u.apply(this,[!0,l,a]))};return{_Init:function(t){var n,r=this._Opts=i(!0,{},e,t);this._Types={},(n=r.Types)&&p.call(this,n)},add:function(){var t=s.slice.call(arguments);return t.unshift(!0),f.apply(this,t),this},once:function(t,e){return u.call(this,!0,t,{handler:e,once:!0}),this},remove:function(){var t=s.slice.call(arguments);t.unshift(!1),f.apply(this,arguments)},fire:function(t,e,n){var r,i,s,l,c,u,f=this._Types;if(!this._disabled&&!o(r=f[t],"undefined")){if(Array.isArray(i=r.Handlers)){s=r.handlerParams,n=n||null,e=e||[],Array.isArray(e)||e.hasOwnProperty("callee")||(e=[e]);for(var p=0;p<i.length;p++)i[p].apply(n,e),s[p].once&&(a.call(this,r,p),p--)}r.fired=!0,(l=r.History)&&(r.History.push({context:n,args:e}),(c=l.maxLength)&&(u=l.length)>c&&l.splice(0,u-c))}},_disable:function(){this._disabled=!0,this._Opts.Expandable=!1},_destroy:function(){this._disable(),delete this._Types},_addTypes:function(t){t&&this._Opts.Expandable===!0&&p.call(this,t)}}}()),c={Tools:{Callbacks:l},Methods:{initCallbacks:n,registerEventTypes:r}};i(!0,e,c),i(!0,t.getNameSpace("Comp",e),c)}(this,this.ru.mail.cpf),function(t,e,n,r){function a(t,e,n){var r,a,i;return isNaN(t)?void 0:(a=["translate",u.transform3d?"3d":"","(",t,"px,",e?e+"px":"0",u.transform3d?", 0":"",")"].join(""),i=u.prefix+"Transform",n===!0?r={name:i,val:a}:(r={})[i]=a,r)}function i(t,e,n){var r=Array.isArray(e)?e:[e],i=c(t,"number"),o=a(r[0],r[1],i||n);return i&&(o.val=[o.val," ","scale(",t,")"].join(""),n||((o={})[o.name]=o.val)),o}function o(t,e,n,r,a){var o,s,l,u=c(r,"string"),h=c(a,"function");f&&(o=t.length,l=o>1&&Array.isArray(e)&&o==e.length,u&&(s=function(){t.removeClass(r),h&&a()},t.addClass(r),t.once(p,function(){--o||s()})),t.each(function(t){var r=l?e[t]:e,a=Array.isArray(r),o=a&&3==r.length?r.pop():null;Array.isArray(n)&&(a||(r=[r]),r=d(r,n[t]));var s=i(o,r,!0);this.style[s.name]=s.val}),!u&&h&&a())}var s=n.Basic,l=n.Touch,c=s.typeOf,u=l&&l.Support||r,f=u.transition&&u.touch,p="transitionend oTransitionEnd webkitTransitionEnd",d=function(t,e){for(var n,r,a,i,o,s=[],l=t.length;l--;){n=t[l],i=e[l];for(var c=i.length;c--;)r=i[c],o=1==c,(o?n>r:r>n)&&(a=n-r,n=r+a/5);s[l]=n}return s};s.Extend(!0,n,{Touch:{Tools:{moveElems:o,getTranslateWithScale:i,getTranslate:a}}})}(this.jQuery||this.$f||this.$,this,this.ru.mail.cpf,this.Modernizr);

!function(n,e,t){var r=n(e),o=n(e.document);t.Basic.Extend(e.getNameSpace("Comp.jQuery",t),function(){var e={Elems:{jBody:null,jDoc:o,jWindow:r}};return n(function(){e.Elems.jBody=n("body")}),e}())}(jQuery,window,window.getNameSpace("ru.mail.cpf")),function(n,e,t){var r=e.getNameSpace,o=t.Basic,a=o.typeOf,i=Array.prototype,l=r("Comp.jQuery",t);o.Extend(l,function(){function e(t,r,o){var i,l,u,s,c,f,d=/^in/i;o=o||{};for(var p in t)t.hasOwnProperty(p)&&(i=t[p],u=a(i),"string"==u&&i.length?(s="j"+p.substr(0,1).toUpperCase()+p.substr(1),o[s]=(c=r.find(i)).length?c:r.is(i)?r:null):"object"==u&&(l="j"+p.replace(d,""),f=o[l],f instanceof n&&f.length&&e(i,f,o)));return o}var r=function(){var n,e=l.Elems.jWindow,r=["scroll","resize"],o=function(){var o,l=t.Comp.Tools.Callbacks,u=arguments,s=a(u[0],"boolean")?i.shift.apply(u):!0;if(a(l,"function")&&(s&&a(n,"undefined")&&(n=l({Types:r}),e.bind(r.join(" "),function(t){var r=t.type;n.fire(r,[{top:e.scrollTop(),left:e.scrollLeft()},{height:e.height(),width:e.width()},r])})),!a(n,"undefined")))for(var c=0;c<r.length;c++)o=arguments[c],a(o,"undefined")&&(o=arguments[c-1]),a(o,"function")&&n[s?"add":"remove"](r[c],o)};return{attach:o,detach:function(){i.unshift.call(arguments,!1),o.apply(null,arguments)}}}(),o=function(n,e,t){e=e||{};var r,o,a,i;for(var l in n)n.hasOwnProperty(l)&&(r=n[l])&&r.length&&(o=r.is("input, select, textarea")?"val":"html",i=t&&l in t?t[l]:l,(a=e[i])?r[o](a):e[i]=r[o]());return e},u={Tools:{getElements:e,winHndlrs:r,toggleElemsVal:o}};return u}())}(jQuery,window,window.getNameSpace("ru.mail.cpf"));

!function(t,e,i){function s(t,e){if(!(this instanceof s))return new s(t,e);var i=t.data("sliderCObj");return i instanceof s?i:(this.jContainer=t.data("sliderCObj",this),void this.Init(e))}i.Basic.typeOf,s.prototype=function(){function s(t){var e,i,s=t;return h&&(i=t.originalEvent.targetTouches)&&i.length>0&&(s=i[0]),e={top:s.pageY,left:s.pageX}}var a,n,r=i.Basic.typeOf,l=i.Comp.jQuery.Tools.getElements,o=i.Comp.Methods.initCallbacks,u=function(){var e,i,s,a=this.optValues,n=this.Elems,r=["from"],l=-1;for(this.Fields={},this.isRange&&r.push("to");i=r[++l];)e="j"+i.substr(0,1).toUpperCase()+i.substr(1)+"Field",s=n[e],s&&s.length||(s=t("<input />").attr({type:"hidden",name:a.fieldName}).appendTo(n.jLine)),this.Fields[i]=s},h="ontouchstart"in e,f=h?["touchstart","touchstart","touchmove","touchend"]:["click","mousedown","mousemove","mouseup"],p=function(t){var e=this.optValues;return e.minVal+t*(e.maxVal-e.minVal)},d=function(t){var e=this.optValues,i=e.minVal;return(t-i)/(e.maxVal-i)},c=function(t){var e=this.Timers;clearTimeout(e[t]),e[t]=!1},m=function(){var t=this.Sizes,e=this.Elems,i={},s=e.jLine,a=e.jRangeLine;"undefined"==typeof t&&(this.Sizes=t={}),i.left=parseInt(a.css("margin-left"),10),i.right=parseInt(a.css("margin-right"),10),t.Slider=e.jFromSlider.outerWidth(!0),t.lineStart=s.offset().left+i.left,t.lineSize=s.innerWidth()-(i.left+i.right)},g=function(){var e=this.Timers,i=this.Drag;e.Draw&&(clearTimeout(e.Draw),e.Draw=!1),this._fire("stop_drag"),this.setValues(this.Values),delete i.Sldr,delete i.Pos,t("body").unbind(".sldrCtrl")},V=function(t){var e,i,s=this.optValues,r=this.Sizes,l=(r.Slider/2,r.lineStart,r.lineSize),o=this.Drag,u=0,h={};if(o.Sldr&&o.Pos){if(u=t.left,e=u-o.Pos.left,!e)return;if(i=p.apply(this,[e/l])-s.minVal,h[o.Sldr]=this.Values[o.Sldr]+i,o.Pos=t,"from"===o.Sldr&&Math.round(this.Values.from)>=Math.round(this.Values.to)&&e>0)return a=a||{top:t.top,left:t.left-e},void this.setValues({from:this.Values.to},{fire:!1});if("from"===o.Sldr&&a&&a.left<t.left)return;if(a=null,"to"===o.Sldr&&Math.round(this.Values.from)>=Math.round(this.Values.to)&&0>e)return n=n||{top:t.top,left:t.left-e},void this.setValues({to:this.Values.from},{fire:!1});if("to"===o.Sldr&&n&&n.left>t.left)return;n=null,this.setValues(h,{fire:!1})}else o.Pos=t},v=function(t){var e=this.Elems,i=this.Sizes,s=e.jRangeLine,a=parseInt(s.css("left"),10),n=i.lineSize-parseInt(s.css("right"),10),r=t-i.lineStart,l={},o=!this.isRange||a>r||n>r&&n-r>r-a;l[o?"from":"to"]=p.apply(this,[r/i.lineSize]),this.setValues(l)},y=function(){var t,e=this.optValues,i=this.rValues,s={},a=e.calculateResult,n=e.drawResult;for(var l in i)i.hasOwnProperty(l)&&(t=i[l],"function"==typeof a&&(t=a.apply(this,[t])),s[l]=t,this.Fields[l].val()!=t&&this.Fields[l].val(t),(e.changeOnDrag||!r(this.isMoving,"undefined")&&this.isMoving===!1)&&this.Fields[l].trigger("change"));this.returnValue=s,"function"==typeof n&&n.apply(this)},S=function(t,e){var i,s=this.Elems,a=this.Sizes,n={};i=Math.abs((e?0:a.lineSize)-Math.round(a.lineSize*d.apply(this,[t]))),n[e?"left":"right"]=i,s.jRangeLine.css(n)},j=function(t){for(var e in t)S.apply(this,[t[e],"from"==e]);y.apply(this),this._fire("draw",null,this)},C=function(t){var e=this,i=this.Timers;if(t.stopPropagation(),t.preventDefault(),!i.Draw)var a=requestAnimationFrame(function(){var i=s(t);V.apply(e,[i]),cancelAnimationFrame(a)})},D=function(){var i,a,n=this,r=this.Elems,l=this.optValues,o=this.Fields,u=r.jFromSlider.add(r.jToSlider),h=this.onResize.bind(this);this.Timers=i={},this.Drag=a={},r.jLine.bind(f[0],function(e){var i=t(e.target);if(!i.is(u)&&!i.parents().filter(u).length){var a=s(e);v.call(n,a.left)}}),o.from.add(o.to).bind("keyup.sldrCtrl change.sldrCtrl",function(t){i.Key&&c.apply(n,["Key"]);var e,s,a=n.rValues,r={},l=!1;for(var u in o)o.hasOwnProperty(u)&&(e=o[u]).length&&(s=e.val())!=a[u]&&(l=!0,r[u]=s);l&&(i.Key=setTimeout(function(){n.setValues(r),c.apply(n,["Key"])},750))}),u.bind(f[1]+".sldrCtrl",function(e){var i=t(this).is(l.cssSelectors.fromSlider),r=prevCoords=s(e);n.isMoving=!0,e.stopPropagation(),e.preventDefault(),a.Sldr=i?"from":"to",V.call(n,r),n._fire("start_drag",[i]),t("body").bind(f[2]+".sldrCtrl",function(t){n.isMoving=!0,C.call(n,t)}).bind(f[3]+".sldrCtrl",function(){n.isMoving=!1,g.apply(n)})}),t(e).resize(h),t(document).on("visibilityChange",function(e){var i=t(e.target);i.is(":visible")&&n.jContainer.closest(i).length&&n.onResize()})},b=function(t,e){var i=this.optValues,s=this.Values,a=i.minVal,n=i.maxVal,r=e?"to":"from";return s[r],t=Math.max(a,Math.min(n,t))},w=function(){var e={check:!0,round:!0};return function(i,s,a){var n,l=this.optValues,o=this.Drag,u=this.rValues,h=this.Values,f=l.processValues,p=l.stepSize,d="from"==(s=s||o.Sldr||"from");a=t.extend({},e,a),i=1*i,isNaN(i)||(r(f,"function")&&(i=f.call(this,d,i,h)),a.check&&(i=b.apply(this,[i,d])),n=a.round?Math.round(i/p)*p:i,h[s]=i,u[s]=n)}}(),z={fieldName:"range",cssSelectors:{Line:"div.line",fromSlider:"i.l",toSlider:"i.r",rangeLine:"div.my_line",Result:"span.js_result",fromField:null,toField:null},type:"range",minVal:0,maxVal:108,stepSize:12,slideByStep:!0,calculateResult:null,drawResult:null,defVal:{},drawHandler:null,onStartDrag:null,onStopDrag:null,processValues:null,changeHandler:null,changeOnDrag:!0};return{Init:function(e){var i;this.optValues=i=t.extend(!0,{},z,e),l.apply(this,[i.cssSelectors,this.jContainer,this.Elems={}]),this.isRange="range"==i.type,this.isMoving=!1,u.apply(this),D.apply(this),m.apply(this),o.call(this,{Types:{draw:i.drawHandler,change:i.changeHandler,start_drag:i.onStartDrag,stop_drag:i.onStopDrag}}),this.setDefaults()},setValues:function(t,e){var i=this.optValues;for(var s in t)w.apply(this,[t[s],s,e]);j.apply(this,[i.slideByStep?this.rValues:this.Values]),e&&e.fire===!1||this._fire("change",null,this)},setDefaults:function(){var t,e=this.Fields,i=this.optValues,s=i.calculateResult,a=i.defVal,n={},r={};this.Values||(this.Values={}),this.rValues||(this.rValues={});for(var l in e)e.hasOwnProperty(l)&&(t=e[l].val()).length&&(n[l]="function"==typeof s?s.apply(this,[t,!0]):t);r.from=n.from||a.from||i.minVal,this.isRange&&(r.to=n.to||a.to||i.maxVal),this.setValues(r,{round:!1})},onResize:function(){m.apply(this),this.setValues(this.Values)}}}(),jQuery.fn.goSliderControl=function(e){return s(t(this),e),this}}(jQuery,window,getNameSpace("ru.mail.cpf"));

(function ($, window, oNS) {
	var typeOf = oNS.Basic.typeOf;

	function secondsToHHmm(seconds) {
		var hh = '0' + Math.floor(seconds / 3600) % 24;
		var mm = '0' + (seconds % 3600) / 60;

		return hh.substr(hh.length-2) +  // часы с ведущим нулем
			':' +
			mm.substr(mm.length-2);  // минуты с ведущим нулем
	}

	$.fn.initTime = function () {
		return this.each(function () {
			var activeSelectorItem = 'timeselect-active';
			var jElem = $(this);
			var jForm = jElem.closest('form');
			var jDates = jForm.find('.js-dates');
			var jSelectedDate = jDates.find('input:radio:checked, input:radio:first').eq(0);
			var jRange = jElem.find('.js-time__range');
			var jSelectors = jElem.find('.js-time__select-range');
			var valueBounds = jRange.attr('data-bounds').split(',');
			var min   = +valueBounds[0] || 0;
			var max   = +valueBounds[1] || 97200;
			var stepSize = 900;  // 15 min
			var curDate = new Date();
			var curSeconds = Math.ceil((curDate.getHours() * 3600 + curDate.getMinutes() * 60) / stepSize) * stepSize;
			var fromValue = parseInt(jElem.find('.js-time__from-field').val());
			if (isNaN(fromValue) && oNS.Types.Date.toStr(curDate, 'YYYY-mm-dd') != jSelectedDate.val()) {
				fromValue = 0;
			}
			var toValue = parseInt(jElem.find('.js-time__to-field').val());
			var from = !isNaN(fromValue) ? fromValue : (curSeconds || min);
			var to = !isNaN(toValue) ? toValue : max;
			var rangeControl = jRange.goSliderControl({
				fieldName: 'time',
				cssSelectors : {
					Line : '.js-time__line',
					fromSlider : '.js-time__from-slider',
					toSlider : '.js-time__to-slider',
					rangeLine : '.js-time__range-line',
					fromField: '.js-time__from-field',
					toField: '.js-time__to-field'
				},
				minVal : min,
				maxVal : max,
				stepSize : stepSize,
				drawResult : function () {
					var from = this.returnValue.from;
					var to = this.returnValue.to;
					var fromStr = secondsToHHmm(from);
					var toStr = secondsToHHmm(to);

					this.Elems.jFromSlider.find('span').text(fromStr);
					this.Elems.jToSlider.find('span').text(toStr);

					jSelectors.removeClass(activeSelectorItem);
					jSelectors.each(function () {
						if (from == this.getAttribute('data-from') && to == this.getAttribute('data-to')) {
							$(this).addClass(activeSelectorItem);
						}
					});
				},
				changeOnDrag: false
			}).data('sliderCObj');

			rangeControl.setValues({ from: from, to: to });

			jSelectors.on('click', function () {
				jSelectors.removeClass(activeSelectorItem);
				$(this).addClass(activeSelectorItem);
				rangeControl.setValues({ from: this.getAttribute('data-from'), to: this.getAttribute('data-to') });
			});
		});
	};

	$('.js-time').initTime();
}(jQuery, this, this.ru.mail.cpf));